/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java-library'
    id("io.spring.dependency-management") version "1.1.7"
    id("org.springframework.boot") version "3.4.4"
    id 'maven-publish'
}

configurations {
    developmentOnly
    runtimeClasspath {
        extendsFrom developmentOnly
    }
}

repositories {
    mavenLocal()
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
}


dependencies {
    api libs.org.springframework.boot.spring.boot.starter.web
    api libs.org.postgresql.postgresql
    api libs.org.springframework.boot.spring.boot.starter.data.jpa
    api libs.io.github.cdimascio.dotenv.java
    testImplementation libs.org.springframework.boot.spring.boot.starter.test
    implementation("org.springdoc:springdoc-openapi-starter-webmvc-ui:2.8.6")
    implementation("org.springframework:spring-webflux")
    implementation('org.springframework.boot:spring-boot-starter-data-redis')
    implementation('org.springframework.boot:spring-boot-starter-cache')
    implementation("io.projectreactor:reactor-core")
    developmentOnly("org.springframework.boot:spring-boot-devtools")
}

bootJar {
    archiveFileName = 'vkparser.jar'
}

group = 'com.telegramapi'
version = '0.0.1-SNAPSHOT'
description = 'Vk Parser'
java.sourceCompatibility = JavaVersion.VERSION_23


tasks.withType(JavaCompile).configureEach {
    options.encoding = 'UTF-8'
}

tasks.withType(Javadoc).configureEach {
    options.encoding = 'UTF-8'
}


publishing {
    publications {
        create("mavenJava", MavenPublication) {
            from components.java
        }
    }
}

gradle.taskGraph.whenReady {
    configurations.findAll { it.name.contains("detached") }.each {
        println "Detached configuration: ${it.name}"
    }
}

// develocity {
//     buildScan {
//         termsOfUseUrl = "https://gradle.com/terms-of-service"
//         termsOfUseAgree = "yes"
//     }
// }